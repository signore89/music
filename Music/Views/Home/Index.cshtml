@model List<Artist>

<div class="container py-5">
    <h1 class="text-center mb-5">Артисты</h1>

    <div class="row">

        @foreach (var artist in Model)
        {
            <div class="card artist-card mb-4" style="width: 18rem;">
            <!-- Изображение артиста -->
                <img src="@Url.Content(artist.UrlImg)" 
                    class="card-img-top" 
                    alt="@artist.Name"
                    asp-append-version="true">
    
                    <div class="card-body">
                        <!-- Имя артиста -->
                            <h5 class="card-title">@artist.Name</h5>
        
                        <!-- Кнопки действий -->
                            <div class="d-flex flex-wrap gap-2">
                                <!-- Добавить в избранное -->
                                    <button class="btn btn-outline-danger btn-sm favorite-btn @(artist.UserId == 1 ? "active" : "")" 
                                            data-artist-id="@artist.Id" 
                                            onclick="toggleFavorite(this)">
                                            <i class="bi @(artist.UserId == 1 ? "bi-heart-fill" : "bi-heart")"></i>
                                            @(artist.UserId == 1 ? "В избранном" : "В избранное")
                                    </button>
                                    <button class="btn btn-outline-danger btn-sm"
                                            data-artist-id="@artist.Id"
                                            onclick="confirmDeleteArtist(this)">
                                        <i class="bi bi-trash"></i> Удалить из избранного
                                    </button>
            
                                    <!-- Альбомы -->
                                    <a asp-controller="Album" asp-action="GetArtistAlbums" asp-route-artistId="@artist.Id"
                                        class="btn btn-outline-primary btn-sm">
                                        <i class="bi bi-collection"></i> Альбомы
                                    </a>
            
                                    <!-- Песни -->
                                     <a asp-controller="Song" asp-action="SoundLibrary" asp-route-artistId="@artist.Id"
                                        class="btn btn-outline-primary btn-sm">
                                        <i class="bi bi-music-note-list"></i> Песни
                                     </a>
            
                                <!-- Изменить -->
                                <a asp-controller="Artist" asp-action="Edit" asp-route-id="@artist.Id" 
                                   class="btn btn-outline-warning btn-sm">
                                    <i class="bi bi-pencil"></i> Изменить
                                </a>
                
                                <!-- Удалить -->
                                <a asp-controller="Artist" asp-action="Delete" asp-route-id="@artist.Id"
                                     class="btn btn-outline-danger">
                                    <i class="bi bi-pencil"></i> Удалить
                                </a>
                            </div>
                     </div>
            </div>
        }
    </div>
</div>

                                <!-- Скрипты для обработки действий -->
@section Scripts {
    <script>
        // Добавление/удаление из избранного
        function toggleFavorite(button) {
            const artistId = button.getAttribute('data-artist-id');
            window.location.href = '@Url.Action("AddFavoriteArtist", "Artist", new { id = "id" })'.replace("id",artistId);
            
            
            // Визуальное переключение состояния
            button.classList.toggle('active');
            if (button.classList.contains('active')) {
                button.innerHTML = '<i class="bi bi-heart-fill"></i> В избранном';
            } else {
                button.innerHTML = '<i class="bi bi-heart"></i> В избранное';
            }
        }
        
        // Подтверждение удаления артиста
        function confirmDeleteArtist(button) {
                const artistId = button.getAttribute('data-artist-id');
                window.location.href = '@Url.Action("RemoveFavoriteArtist", "Artist", new { id = "id" })'.replace("id",artistId);
                // Удаляем карточку из DOM
                // button.closest('.artist-card').remove();
            
        }
    </script>
    }